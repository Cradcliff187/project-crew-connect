import { EntityType, FieldDefinition } from '@/types/reports';
import {
  BarChart3,
  Building,
  ClipboardList,
  CreditCard,
  FileText,
  FolderClosed,
  HandCoins,
  PersonStanding,
  ShoppingBag,
  Timer,
  Users,
} from 'lucide-react';
import React from 'react';

// Define entity display names
export const entityNames: Record<EntityType, string> = {
  projects: 'Projects',
  customers: 'Customers',
  vendors: 'Vendors',
  subcontractors: 'Subcontractors',
  work_orders: 'Work Orders',
  estimates: 'Estimates',
  expenses: 'Expenses',
  time_entries: 'Time Entries',
  change_orders: 'Change Orders',
  employees: 'Employees',
};

// Map entity types to their respective icons
export const entityIcons: Record<EntityType, React.ReactNode> = {
  projects: <FolderClosed className="h-4 w-4" />,
  customers: <Users className="h-4 w-4" />,
  vendors: <Building className="h-4 w-4" />,
  subcontractors: <PersonStanding className="h-4 w-4" />,
  work_orders: <ClipboardList className="h-4 w-4" />,
  estimates: <FileText className="h-4 w-4" />,
  expenses: <CreditCard className="h-4 w-4" />,
  time_entries: <Timer className="h-4 w-4" />,
  change_orders: <HandCoins className="h-4 w-4" />,
  employees: <Users className="h-4 w-4" />,
};

// Map entity types to their actual database table names (matching Supabase exactly)
export const entityTableMap: Record<EntityType, string> = {
  projects: 'projects',
  customers: 'customers',
  vendors: 'vendors',
  subcontractors: 'subcontractors',
  work_orders: 'maintenance_work_orders',
  estimates: 'estimates',
  expenses: 'expenses',
  time_entries: 'time_entries',
  change_orders: 'change_orders',
  employees: 'employees',
};

// Define fields for each entity type
export const entityFields: Record<EntityType, FieldDefinition[]> = {
  projects: [
    {
      label: 'Project ID',
      field: 'projectid',
      type: 'text',
      description: 'Unique identifier for the project',
    },
    {
      label: 'Project Name',
      field: 'projectname',
      type: 'text',
      description: 'Name of the project',
    },
    {
      label: 'Customer',
      field: 'customername',
      type: 'text',
      description: 'Name of the customer associated with this project',
    },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Current project status (e.g., Active, Completed, On Hold)',
    },
    {
      label: 'Start Date',
      field: 'start_date',
      type: 'date',
      description: 'Date when the project work commenced',
    },
    {
      label: 'Created Date',
      field: 'created_at',
      type: 'date',
      description: 'Date when the project was created in the system',
    },
    {
      label: 'Target End Date',
      field: 'target_end_date',
      type: 'date',
      description: 'Scheduled completion date for the project',
    },
    {
      label: 'Total Budget',
      field: 'total_budget',
      type: 'currency',
      description: 'Total allocated budget for the project',
    },
    {
      label: 'Current Expenses',
      field: 'current_expenses',
      type: 'currency',
      description: 'Actual expenses incurred to date',
    },
    {
      label: 'Budget Utilization',
      field: 'budget_utilization',
      type: 'percentage',
      description: 'Percentage of budget used: (Current Expenses / Total Budget) × 100%',
    },
    {
      label: 'Contract Value',
      field: 'contract_value',
      type: 'currency',
      description: 'Total value of the contract with the customer',
    },
    {
      label: 'Revenue',
      field: 'actual_revenue',
      type: 'currency',
      description: 'Actual revenue recognized from the project',
    },
    {
      label: 'Original Base Cost',
      field: 'original_base_cost',
      type: 'currency',
      description: 'Initial estimated cost before markup',
    },
    {
      label: 'Selling Price',
      field: 'original_selling_price',
      type: 'currency',
      description: 'Initial price quoted to the customer',
    },
    {
      label: 'Contingency',
      field: 'original_contingency_amount',
      type: 'currency',
      description: 'Reserve funds for unforeseen costs',
    },
    {
      label: 'CO Cost Impact',
      field: 'change_order_cost_impact',
      type: 'currency',
      description: 'Net impact of change orders on project cost',
    },
    {
      label: 'CO Price Impact',
      field: 'change_order_selling_price_impact',
      type: 'currency',
      description: 'Net impact of change orders on selling price',
    },
    {
      label: 'Gross Margin',
      field: 'gross_margin',
      type: 'currency',
      description: 'Profit before overhead: Contract Value - Base Cost',
    },
    {
      label: 'Gross Margin %',
      field: 'gross_margin_percentage',
      type: 'percentage',
      description: 'Profit percentage: (Gross Margin / Contract Value) × 100%',
    },
    {
      label: 'Completion %',
      field: 'completion_percentage',
      type: 'percentage',
      description:
        'Estimated percentage of project completion based on timeline or budget utilization',
    },
  ],
  customers: [
    {
      label: 'Customer ID',
      field: 'customerid',
      type: 'text',
      description: 'Unique identifier for the customer',
    },
    {
      label: 'Customer Name',
      field: 'customername',
      type: 'text',
      description: 'Business or individual name',
    },
    {
      label: 'Email',
      field: 'contactemail',
      type: 'text',
      description: 'Primary contact email address',
    },
    { label: 'Phone', field: 'phone', type: 'text', description: 'Primary contact phone number' },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Current status of the customer relationship',
    },
    {
      label: 'Created Date',
      field: 'createdon',
      type: 'date',
      description: 'Date when the customer record was created',
    },
  ],
  vendors: [
    {
      label: 'Vendor ID',
      field: 'vendorid',
      type: 'text',
      description: 'Unique identifier for the vendor',
    },
    {
      label: 'Vendor Name',
      field: 'vendorname',
      type: 'text',
      description: 'Business name of the vendor',
    },
    { label: 'Email', field: 'email', type: 'text', description: 'Primary contact email address' },
    { label: 'Phone', field: 'phone', type: 'text', description: 'Primary contact phone number' },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Current status of the vendor relationship',
    },
    {
      label: 'Created Date',
      field: 'createdon',
      type: 'date',
      description: 'Date when the vendor record was created',
    },
  ],
  subcontractors: [
    {
      label: 'Subcontractor ID',
      field: 'subid',
      type: 'text',
      description: 'Unique identifier for the subcontractor',
    },
    {
      label: 'Company Name',
      field: 'company_name',
      type: 'text',
      description: 'Business name of the subcontractor',
    },
    {
      label: 'Contact Name',
      field: 'contact_name',
      type: 'text',
      description: 'Primary contact person name',
    },
    {
      label: 'Email',
      field: 'contactemail',
      type: 'text',
      description: 'Primary contact email address',
    },
    {
      label: 'Phone',
      field: 'phone_number',
      type: 'text',
      description: 'Primary contact phone number',
    },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Current status of the subcontractor relationship',
    },
    {
      label: 'Rating',
      field: 'rating',
      type: 'number',
      description: 'Quality rating from 1-5 stars based on past work',
    },
    {
      label: 'Created Date',
      field: 'created_at',
      type: 'date',
      description: 'Date when the subcontractor record was created',
    },
  ],
  work_orders: [
    {
      label: 'Work Order ID',
      field: 'work_order_id',
      type: 'text',
      description: 'Unique identifier for the work order',
    },
    {
      label: 'Title',
      field: 'title',
      type: 'text',
      description: 'Brief description of the work order',
    },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Current status of the work order (e.g., New, In Progress, Completed)',
    },
    {
      label: 'Priority',
      field: 'priority',
      type: 'text',
      description: 'Urgency level (e.g., Low, Medium, High)',
    },
    {
      label: 'Created Date',
      field: 'created_at',
      type: 'date',
      description: 'Date when the work order was created',
    },
    {
      label: 'Due Date',
      field: 'due_by_date',
      type: 'date',
      description: 'Deadline for completing the work order',
    },
    {
      label: 'Progress',
      field: 'progress',
      type: 'percentage',
      description: 'Percentage of work completed (0-100%)',
    },
    {
      label: 'Total Cost',
      field: 'total_cost',
      type: 'currency',
      description: 'Sum of all expenses related to this work order',
    },
  ],
  estimates: [
    {
      label: 'Estimate ID',
      field: 'estimateid',
      type: 'text',
      description: 'Unique identifier for the estimate',
    },
    {
      label: 'Project Name',
      field: 'projectname',
      type: 'text',
      description: 'Name of the associated project',
    },
    {
      label: 'Customer Name',
      field: 'customername',
      type: 'text',
      description: 'Name of the customer',
    },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Current status of the estimate (e.g., Draft, Sent, Approved)',
    },
    {
      label: 'Created Date',
      field: 'datecreated',
      type: 'date',
      description: 'Date when the estimate was created',
    },
    {
      label: 'Amount',
      field: 'estimateamount',
      type: 'currency',
      description: 'Total estimated amount before contingency',
    },
    {
      label: 'Contingency',
      field: 'contingencyamount',
      type: 'currency',
      description: 'Additional buffer for unexpected costs',
    },
    {
      label: 'Total with Contingency',
      field: 'total_with_contingency',
      type: 'currency',
      description: 'Sum of estimate amount and contingency',
    },
  ],
  expenses: [
    {
      label: 'Description',
      field: 'description',
      type: 'text',
      description: 'Brief explanation of the expense',
    },
    {
      label: 'Type',
      field: 'expense_type',
      type: 'text',
      description: 'Category of expense (e.g., Material, Labor, Equipment)',
    },
    {
      label: 'Amount',
      field: 'amount',
      type: 'currency',
      description: 'Total cost of the expense',
    },
    {
      label: 'Date',
      field: 'expense_date',
      type: 'date',
      description: 'Date when the expense was incurred',
    },
    {
      label: 'Vendor',
      field: 'vendor_id',
      type: 'text',
      description: 'Vendor associated with this expense',
    },
  ],
  time_entries: [
    {
      label: 'Employee',
      field: 'employee_id',
      type: 'text',
      description: 'Name of the employee who performed the work',
    },
    {
      label: 'Date Worked',
      field: 'date_worked',
      type: 'date',
      description: 'Date when the work was performed',
    },
    {
      label: 'Hours',
      field: 'hours_worked',
      type: 'number',
      description: 'Number of hours worked',
    },
    {
      label: 'Rate',
      field: 'employee_rate',
      type: 'currency',
      description: 'Hourly billing rate for the employee',
    },
    {
      label: 'Total Cost',
      field: 'total_cost',
      type: 'currency',
      description: 'Hours worked × Rate',
    },
    {
      label: 'Notes',
      field: 'notes',
      type: 'text',
      description: 'Additional details about the work performed',
    },
  ],
  change_orders: [
    {
      label: 'CO Number',
      field: 'change_order_number',
      type: 'text',
      description: 'Unique identifier for the change order',
    },
    {
      label: 'Title',
      field: 'title',
      type: 'text',
      description: 'Brief description of the change order',
    },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Current status (e.g., Pending, Approved, Rejected)',
    },
    {
      label: 'Amount',
      field: 'total_amount',
      type: 'currency',
      description: 'Total financial impact of the change order',
    },
    {
      label: 'Impact Days',
      field: 'impact_days',
      type: 'number',
      description: 'Number of days added to the schedule',
    },
    {
      label: 'Requested Date',
      field: 'requested_date',
      type: 'date',
      description: 'Date when the change was requested',
    },
    {
      label: 'Approved Date',
      field: 'approved_date',
      type: 'date',
      description: 'Date when the change was approved',
    },
    {
      label: 'Requested By',
      field: 'requested_by',
      type: 'text',
      description: 'Person who requested the change',
    },
  ],
  employees: [
    {
      label: 'First Name',
      field: 'first_name',
      type: 'text',
      description: "Employee's first name",
    },
    { label: 'Last Name', field: 'last_name', type: 'text', description: "Employee's last name" },
    { label: 'Email', field: 'email', type: 'text', description: "Employee's email address" },
    {
      label: 'Phone',
      field: 'phone',
      type: 'text',
      description: "Employee's contact phone number",
    },
    {
      label: 'Role',
      field: 'role',
      type: 'text',
      description: 'Job role or position in the company',
    },
    {
      label: 'Status',
      field: 'status',
      type: 'status',
      description: 'Employment status (Active or Inactive)',
    },
    {
      label: 'Hourly Rate',
      field: 'hourly_rate',
      type: 'currency',
      description: "Standard billing rate for the employee's time",
    },
    {
      label: 'Created Date',
      field: 'created_at',
      type: 'date',
      description: 'Date when the employee record was created',
    },
    {
      label: 'Cost Rate',
      field: 'cost_rate',
      type: 'currency',
      description: "Internal cost of the employee's time to the company",
    },
    {
      label: 'Bill Rate',
      field: 'bill_rate',
      type: 'currency',
      description: "Rate charged to clients for the employee's time",
    },
  ],
};
